<!DOCTYPE html>
<html>
<head>
    <title>Artillery Simulator</title>
    <style>
        body {
            background-color: #000;
            color: #00FF00;
            font-family: 'Courier New', Courier, monospace;
            text-align: center;
        }
        canvas {
            background-color: #000;
            border: 1px solid #00FF00;
        }
        input {
            background-color: #000;
            color: #00FF00;
            border: 1px solid #00FF00;
            font-family: 'Courier New', Courier, monospace;
        }
        button {
            background-color: #00FF00;
            color: #000;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            font-family: 'Courier New', Courier, monospace;
        }
    </style>
</head>
<body>
    <h1>Artillery Simulator</h1>
    <canvas id="gameCanvas" width="800" height="400"></canvas>
    <div id="controls">
        <p id="wind"></p>
        <p id="playerTurn"></p>
        <label for="angle">Angle:</label>
        <input type="text" id="angle" size="5">
        <label for="force">Force:</label>
        <input type="text" id="force" size="5">
        <button id="fireButton">Fire!</button>
        <p id="message"></p>
    </div>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        const windElement = document.getElementById('wind');
        const playerTurnElement = document.getElementById('playerTurn');
        const angleInput = document.getElementById('angle');
        const forceInput = document.getElementById('force');
        const fireButton = document.getElementById('fireButton');
        const messageElement = document.getElementById('message');

        const canvasWidth = canvas.width;
        const canvasHeight = canvas.height;
        const groundHeight = 50;

        let player1, player2;
        let mountain;
        let wind;
        let currentPlayer;
        let projectile;
        let gameOver;

        function init() {
            const player1X = Math.random() * (canvasWidth / 4);
            const player2X = canvasWidth - Math.random() * (canvasWidth / 4);

            player1 = { x: player1X, y: canvasHeight - groundHeight, color: 'white', score: 0 };
            player2 = { x: player2X, y: canvasHeight - groundHeight, color: 'magenta', score: 0 };

            const mountainWidth = 100 + Math.random() * 100;
            const mountainHeight = 100 + Math.random() * 150;
            const mountainX = (canvasWidth - mountainWidth) / 2;
            mountain = { x: mountainX, y: canvasHeight - groundHeight, width: mountainWidth, height: mountainHeight };

            wind = (Math.random() - 0.5) * 20;
            currentPlayer = player1;
            projectile = null;
            gameOver = false;

            draw();
            updateUI();
        }

        function draw() {
            ctx.clearRect(0, 0, canvasWidth, canvasHeight);

            // Draw ground
            ctx.fillStyle = '#00FF00';
            ctx.fillRect(0, canvasHeight - groundHeight, canvasWidth, groundHeight);

            // Draw mountain
            ctx.beginPath();
            ctx.moveTo(mountain.x, mountain.y);
            ctx.quadraticCurveTo(
                mountain.x + mountain.width / 2, mountain.y - mountain.height,
                mountain.x + mountain.width, mountain.y
            );
            ctx.closePath();
            ctx.fill();

            // Draw cannons
            drawCannon(player1);
            drawCannon(player2);

            // Draw projectile
            if (projectile) {
                ctx.fillStyle = 'yellow';
                ctx.beginPath();
                ctx.arc(projectile.x, projectile.y, 3, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function drawCannon(player) {
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x - 10, player.y - 10, 20, 10);
        }

        function updateUI() {
            windElement.textContent = `Wind: ${Math.round(wind)}` + (wind > 0 ? ' ->' : ' <-');
            playerTurnElement.textContent = `Player ${currentPlayer === player1 ? 1 : 2}'s Turn`;
            messageElement.textContent = '';
        }

        fireButton.addEventListener('click', () => {
            if (gameOver) {
                init();
                return;
            }

            const angle = parseFloat(angleInput.value);
            const force = parseFloat(forceInput.value);

            if (isNaN(angle) || isNaN(force)) {
                messageElement.textContent = 'Invalid input!';
                return;
            }

            const angleRad = (currentPlayer === player1 ? angle : 180 - angle) * Math.PI / 180;
            const velocityX = Math.cos(angleRad) * force;
            const velocityY = -Math.sin(angleRad) * force;

            projectile = {
                x: currentPlayer.x,
                y: currentPlayer.y - 10,
                velocityX: velocityX,
                velocityY: velocityY
            };

            animateProjectile();
        });

        function animateProjectile() {
            if (!projectile) return;

            projectile.velocityY += 0.1; // Gravity
            projectile.x += projectile.velocityX + wind / 10;
            projectile.y += projectile.velocityY;

            draw();

            // Collision detection
            if (projectile.y > canvasHeight - groundHeight) {
                messageElement.textContent = 'Miss!';
                switchPlayer();
                projectile = null;
                return;
            }

            if (
                projectile.x > mountain.x &&
                projectile.x < mountain.x + mountain.width
            ) {
                const t = (projectile.x - mountain.x) / mountain.width;
                const mountainY = mountain.y - 2 * t * (1 - t) * mountain.height;

                if (projectile.y > mountainY) {
                    messageElement.textContent = 'Hit the mountain!';
                    switchPlayer();
                    projectile = null;
                    return;
                }
            }


            const opponent = currentPlayer === player1 ? player2 : player1;
            if (
                projectile.x > opponent.x - 10 &&
                projectile.x < opponent.x + 10 &&
                projectile.y > opponent.y - 10 &&
                projectile.y < opponent.y
            ) {
                messageElement.textContent = `Player ${currentPlayer === player1 ? 1 : 2} wins!`;
                currentPlayer.score++;
                gameOver = true;
                fireButton.textContent = 'Play Again?';
                return;
            }

            requestAnimationFrame(animateProjectile);
        }

        function switchPlayer() {
            currentPlayer = currentPlayer === player1 ? player2 : player1;
            updateUI();
        }

        init();
    </script>
</body>
</html>